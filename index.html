<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>포맨</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"
            integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <style>
        /* CSS 스타일 */
        #map {
            width: 100%; 
            height: 100vh; /* 뷰포트 전체 높이 사용 */
        }

        .recycle {
            background-color: #4CAF50; /* 녹색 배경 */
            color: white; /* 흰색 글자 */
            border: none; /* 테두리 없음 */
            padding: 10px 20px; /* 상하 10px, 좌우 20px 여백 */
            text-align: center; /* 중앙 정렬 */
            text-decoration: none; /* 밑줄 없음 */
            display: inline-block; /* 인라인 블록 요소 */
            font-size: 16px; /* 글자 크기 */
            margin: 4px 2px; /* 여백 */
            cursor: pointer; /* 마우스 포인터 커서 */
            border-radius: 8px; /* 둥근 모서리 */
        }
        /* 기타 스타일... */
    </style>
</head>
<body>
    <div class="main flex justify-start">
        <div id="lists" class="w-2/5 h-screen" style="overflow:auto;">
            <div class="flex justify-start">
                <button type="button" id="btn" class="recycle">재활용</button>
            </div>
            <div class="container"></div>
        </div>
        <div id="map" class="w-3/5 h-screen"></div>
    </div>
    
    <script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=e863ec1a02fcade8fb8de74a6352f229&libraries=clusterer"></script>
    <script>
        $(document).ready(function () {
            var 재활용데이터 = [
                // ... (재활용 데이터)
            ];

            let 보여지는데이터 = 재활용데이터;

            const displayLIst = () => {
                $('.container').empty(); // 기존 데이터 초기화
                보여지는데이터.forEach((데이터, 순서) => {
                    let 엘리먼트 = `...`; // 각 데이터의 HTML 생성
                    $('.container').append(엘리먼트);
                    $(`#${순서}`).click((e) => {
                        var mapContainer = document.getElementById('map'),
                            mapOption = {
                                center: new kakao.maps.LatLng(데이터.longitude, 데이터.latitude), // 지도의 중심좌표
                                level: 3 // 지도의 확대 레벨
                            };

                        // 지도를 생성합니다    
                        var map = new kakao.maps.Map(mapContainer, mapOption);
                        
                        // 마커 생성
                        var marker = new kakao.maps.Marker({
                            position: new kakao.maps.LatLng(데이터.longitude, 데이터.latitude),
                        });

                        marker.setMap(map); // 마커를 지도 위에 표시
                        
                        // 커스텀 오버레이 내용 생성
                        var content = `...`; // 커스텀 오버레이 HTML
                        var overlay = new kakao.maps.CustomOverlay({
                            content: content,
                            map: map,
                            position: marker.getPosition()      
                        });

                        // 마커 클릭 이벤트
                        kakao.maps.event.addListener(marker, 'click', function() {
                            overlay.setMap(map);
                        });
                    });
                });
            };

            const $recycleBtn = document.querySelector('.recycle');
            const dispalyRecycle = () => {
                보여지는데이터 = 재활용데이터;
                displayLIst();
            }

            $recycleBtn.addEventListener('click', dispalyRecycle);

            // 지도 초기화
            var mapContainer = document.getElementById('map'), // 지도를 표시할 div
                mapOption = {
                    center: new kakao.maps.LatLng(37.402696, 126.922043), // 지도의 중심좌표
                    level: 3 // 지도의 확대 레벨
                };

            // 지도를 생성합니다    
            var map = new kakao.maps.Map(mapContainer, mapOption);
        });
    </script>
</body>
</html>
