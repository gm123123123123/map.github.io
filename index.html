<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>포맨</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="./main.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"
    integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
</head>
<body>
    <div class="main flex justify-start">
        <div id="lists" class="w-2/5 h-screen" style="overflow:auto;">
            <div class="flex justify-start">
                <button type="button" id="recycleBtn" class="recycle">재활용</button>
                <button type="button" id="disposableBtn" class="disposable">일회용</button>
            </div>
            <div class="container"></div>
        </div>
        <div id="map" class="w-3/5 h-screen"></div>
    </div>

    <script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=3e8d52a283db7d15b3c14ad5fcbafa61"></script>
    <script>
        var 재활용데이터 = [
            {latitude:37.394157, longitude:126.957065, 이름:'안양시청', 내용:'재활용', 사진: './사진/안양시청.jpeg', 방법:'네프론 방문: 네프론을 방문합니다.<br>투입: 캔과 페트를 제출합니다.<br>포인트 반환: 포인트 확인 후 현금으로 환전합니다.'},
            // ... 더 많은 데이터 추가 ...
        ];

        const displayList = () => {
            보여지는데이터.forEach((데이터, 순서) => {
                let 엘리먼트 = `
                    <div class="product border-b-2 border-grey-500 bg-stone-50" id="${순서}">
                        <div class="thumbnail" style="background-image: url('${데이터.사진}')"></div>
                        <div class="flex-grow-1 p-4">
                            <h5 class="title">분리수거함 이름: ${데이터.이름}</h5>
                            <p class="seat">내용: ${데이터.내용}</p>
                        </div>
                    </div>`;
                $('.container').append(엘리먼트);

                $(`#${순서}`).click((e) => {
                    var mapOption = {
                        center: new kakao.maps.LatLng(데이터.latitude, 데이터.longitude), // 지도의 중심좌표
                        level: 3 // 지도의 확대 레벨
                    };
                    var map = new kakao.maps.Map(mapContainer, mapOption);

                    var marker = new kakao.maps.Marker({
                        position: new kakao.maps.LatLng(데이터.latitude, 데이터.longitude),
                    });

                    marker.setMap(map);

                    var content = `<div class="wrap">
                        <div class="info">
                            <div class="title">${데이터.이름}</div>
                            <div class="body">
                                <div class="img"><img src="${데이터.사진}" width="73" height="70"></div>
                                <div class="desc">${데이터.방법}</div>
                            </div>
                        </div>
                    </div>`;

                    var overlay = new kakao.maps.CustomOverlay({
                        content: content,
                        map: map,
                        position: marker.getPosition()
                    });

                    kakao.maps.event.addListener(marker, 'click', function() {
                        overlay.setMap(map);
                    });
                });
            });
        };

        let 보여지는데이터 = 재활용데이터;
        const $recycleBtn = document.querySelector('.recycle');

        const displayRecycle = () => {
            보여지는데이터 = 재활용데이터;
            $('.container').empty();
            displayList();
        };

        $recycleBtn.addEventListener('click', displayRecycle);

        var mapContainer = document.getElementById('map');
        var mapOption = {
            center: new kakao.maps.LatLng(37.401592,126.922172), // 기본 지도 중심 좌표
            level: 3 // 지도 확대 레벨
        };
        var map = new kakao.maps.Map(mapContainer, mapOption);

        displayList();
    </script>
</body>
</html>
